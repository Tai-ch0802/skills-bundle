---
name: webapp-testing
description: Web æ‡‰ç”¨æ¸¬è©¦åŸå‰‡ã€‚E2Eã€Playwrightã€æ·±åº¦ç¨½æ ¸ç­–ç•¥ã€‚
allowed-tools: Read, Write, Edit, Glob, Grep, Bash
---

# Web App æ¸¬è©¦

> ç™¼ç¾ä¸¦æ¸¬è©¦ä¸€åˆ‡ã€‚ä¸ç•™ä»»ä½•è·¯ç”±æœªæ¸¬è©¦ã€‚

## ğŸ”§ åŸ·è¡Œè…³æœ¬

**åŸ·è¡Œé€™äº›é€²è¡Œè‡ªå‹•åŒ–ç€è¦½å™¨æ¸¬è©¦ï¼š**

| è…³æœ¬ | ç”¨é€” | ä½¿ç”¨æ–¹å¼ |
|------|------|----------|
| `scripts/playwright_runner.py` | åŸºç¤ç€è¦½å™¨æ¸¬è©¦ | `python scripts/playwright_runner.py https://example.com` |
| | å«æˆªåœ– | `python scripts/playwright_runner.py <url> --screenshot` |
| | ç„¡éšœç¤™æª¢æŸ¥ | `python scripts/playwright_runner.py <url> --a11y` |

**éœ€è¦ï¼š** `pip install playwright && playwright install chromium`

---

## 1. æ·±åº¦ç¨½æ ¸æ–¹æ³•

### å…ˆæ¢ç´¢

| ç›®æ¨™ | å¦‚ä½•æ‰¾åˆ° |
|------|----------|
| è·¯ç”± | æƒæ app/ã€pages/ã€router æª”æ¡ˆ |
| API ç«¯é» | Grep HTTP æ–¹æ³• |
| å…ƒä»¶ | æ‰¾åˆ°å…ƒä»¶ç›®éŒ„ |
| åŠŸèƒ½ | é–±è®€æ–‡ä»¶ |

### ç³»çµ±åŒ–æ¸¬è©¦

1. **æ˜ å°„** â€” åˆ—å‡ºæ‰€æœ‰è·¯ç”±/API
2. **æƒæ** â€” é©—è­‰å®ƒå€‘æœ‰å›æ‡‰
3. **æ¸¬è©¦** â€” è¦†è“‹é—œéµè·¯å¾‘

---

## 2. Web æ¸¬è©¦é‡‘å­—å¡”

```
        /\          E2Eï¼ˆå°‘é‡ï¼‰
       /  \         é—œéµä½¿ç”¨è€…æµç¨‹
      /----\
     /      \       æ•´åˆï¼ˆä¸€äº›ï¼‰
    /--------\      APIã€è³‡æ–™æµ
   /          \
  /------------\    å…ƒä»¶ï¼ˆå¤§é‡ï¼‰
                    å€‹åˆ¥ UI ç‰‡æ®µ
```

---

## 3. E2E æ¸¬è©¦åŸå‰‡

### è¦æ¸¬è©¦ä»€éº¼

| å„ªå…ˆ | æ¸¬è©¦ |
|------|------|
| 1 | æ­£å¸¸è·¯å¾‘ä½¿ç”¨è€…æµç¨‹ |
| 2 | é©—è­‰æµç¨‹ |
| 3 | é—œéµæ¥­å‹™å‹•ä½œ |
| 4 | éŒ¯èª¤è™•ç† |

### E2E æœ€ä½³å¯¦è¸

| å¯¦è¸ | åŸå›  |
|------|------|
| ä½¿ç”¨ data-testid | ç©©å®šçš„é¸æ“‡å™¨ |
| ç­‰å¾…å…ƒç´  | é¿å…ä¸ç©©å®šæ¸¬è©¦ |
| æ¸…æ½”ç‹€æ…‹ | ç¨ç«‹æ¸¬è©¦ |
| é¿å…å¯¦ä½œç´°ç¯€ | æ¸¬è©¦ä½¿ç”¨è€…è¡Œç‚º |

---

## 4. Playwright åŸå‰‡

### æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | ç”¨é€” |
|------|------|
| Page Object Model | å°è£é é¢é‚è¼¯ |
| Fixtures | å¯é‡ç”¨æ¸¬è©¦è¨­ç½® |
| Assertions | å…§å»ºè‡ªå‹•ç­‰å¾… |
| Trace Viewer | é™¤éŒ¯å¤±æ•— |

### è¨­å®š

| è¨­å®š | å»ºè­° |
|------|------|
| é‡è©¦ | CI ä¸Š 2 æ¬¡ |
| Trace | on-first-retry |
| æˆªåœ– | on-failure |
| å½±ç‰‡ | retain-on-failure |

---

## 5. è¦–è¦ºæ¸¬è©¦

### ä½•æ™‚ä½¿ç”¨

| æƒ…å¢ƒ | åƒ¹å€¼ |
|------|------|
| è¨­è¨ˆç³»çµ± | é«˜ |
| è¡ŒéŠ·é é¢ | é«˜ |
| å…ƒä»¶åº« | ä¸­ |
| å‹•æ…‹å…§å®¹ | è¼ƒä½ |

---

## 6. API æ¸¬è©¦åŸå‰‡

### è¦†è“‹ç¯„åœ

| é ˜åŸŸ | æ¸¬è©¦ |
|------|------|
| ç‹€æ…‹ç¢¼ | 200ã€400ã€404ã€500 |
| å›æ‡‰æ ¼å¼ | ç¬¦åˆ schema |
| éŒ¯èª¤è¨Šæ¯ | ä½¿ç”¨è€…å‹å–„ |
| é‚Šç•Œæƒ…æ³ | ç©ºã€å¤§é‡ã€ç‰¹æ®Šå­—å…ƒ |

---

## 7. æ¸¬è©¦çµ„ç¹”

### æª”æ¡ˆçµæ§‹

```
tests/
â”œâ”€â”€ e2e/           # å®Œæ•´ä½¿ç”¨è€…æµç¨‹
â”œâ”€â”€ integration/   # APIã€è³‡æ–™
â”œâ”€â”€ component/     # UI å–®å…ƒ
â””â”€â”€ fixtures/      # å…±äº«è³‡æ–™
```

---

## 8. CI æ•´åˆ

### ç®¡ç·šæ­¥é©Ÿ

1. å®‰è£ä¾è³´
2. å®‰è£ç€è¦½å™¨
3. åŸ·è¡Œæ¸¬è©¦
4. ä¸Šå‚³æ§‹å»ºç‰©ï¼ˆtracesã€æˆªåœ–ï¼‰

---

## 9. åæ¨¡å¼

| âŒ ä¸è¦ | âœ… è¦ |
|---------|-------|
| æ¸¬è©¦å¯¦ä½œ | æ¸¬è©¦è¡Œç‚º |
| å¯«æ­»ç­‰å¾… | ä½¿ç”¨è‡ªå‹•ç­‰å¾… |
| è·³éæ¸…ç† | éš”é›¢æ¸¬è©¦ |
| å¿½ç•¥ä¸ç©©å®šæ¸¬è©¦ | ä¿®å¾©æ ¹æœ¬åŸå›  |

---

> **è¨˜ä½ï¼š** E2E æ¸¬è©¦å¾ˆæ˜‚è²´ã€‚åƒ…ç”¨æ–¼é—œéµè·¯å¾‘ã€‚
