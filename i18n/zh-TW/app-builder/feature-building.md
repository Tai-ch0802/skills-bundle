# 功能建構

> 如何分析和實作新功能。

## 功能分析

```
請求：「新增支付系統」

分析：
├── 所需變更：
│   ├── 資料庫：orders、payments 資料表
│   ├── 後端：/api/checkout、/api/webhooks/stripe
│   ├── 前端：CheckoutForm、PaymentSuccess
│   └── 配置：Stripe API 金鑰
│
├── 依賴：
│   ├── stripe 套件
│   └── 現有使用者驗證
│
└── 預估時間：15-20 分鐘
```

## 迭代增強流程

```
1. 分析現有專案
2. 建立變更計畫
3. 向使用者展示計畫
4. 取得核准
5. 套用變更
6. 測試
7. 展示預覽
```

## 錯誤處理

| 錯誤類型 | 解決策略 |
|----------|----------|
| TypeScript 錯誤 | 修復型別、新增缺少的引入 |
| 缺少依賴 | 執行 npm install |
| 埠口衝突 | 建議替代埠口 |
| 資料庫錯誤 | 檢查遷移、驗證連線 |

## 復原策略

```
1. 偵測錯誤
2. 嘗試自動修復
3. 如果失敗，回報使用者
4. 建議替代方案
5. 必要時回滾
```
