# 架構模式參考

> 常見模式的快速參考與使用指南。

## 資料存取模式

| 模式 | 何時使用 | 何時不用 | 複雜度 |
|------|----------|----------|--------|
| **Active Record** | 簡單 CRUD、快速原型 | 複雜查詢、多來源 | 低 |
| **Repository** | 需要測試、多來源 | 簡單 CRUD、單一資料庫 | 中 |
| **Unit of Work** | 複雜交易 | 簡單操作 | 高 |
| **Data Mapper** | 複雜領域、效能需求 | 簡單 CRUD、快速開發 | 高 |

## 領域邏輯模式

| 模式 | 何時使用 | 何時不用 | 複雜度 |
|------|----------|----------|--------|
| **交易腳本** | 簡單 CRUD、程序式 | 複雜業務規則 | 低 |
| **表模組** | 記錄基礎的邏輯 | 需要豐富行為 | 低 |
| **領域模型** | 複雜業務邏輯 | 簡單 CRUD | 中 |
| **DDD（完整）** | 複雜領域、有領域專家 | 簡單領域、無專家 | 高 |

## 分散式系統模式

| 模式 | 何時使用 | 何時不用 | 複雜度 |
|------|----------|----------|--------|
| **模組化單體** | 小團隊、邊界不清 | 清晰上下文、不同規模 | 中 |
| **微服務** | 不同規模、大團隊 | 小團隊、簡單領域 | 非常高 |
| **事件驅動** | 即時、鬆耦合 | 簡單工作流、強一致性 | 高 |
| **CQRS** | 讀/寫效能分歧 | 簡單 CRUD、相同模型 | 高 |
| **Saga** | 分散式交易 | 單一資料庫、簡單 ACID | 高 |

## API 模式

| 模式 | 何時使用 | 何時不用 | 複雜度 |
|------|----------|----------|--------|
| **REST** | 標準 CRUD、資源 | 即時、複雜查詢 | 低 |
| **GraphQL** | 彈性查詢、多客戶端 | 簡單 CRUD、快取需求 | 中 |
| **gRPC** | 內部服務、效能 | 公開 API、瀏覽器客戶端 | 中 |
| **WebSocket** | 即時更新 | 簡單請求/回應 | 中 |

---

## 簡約原則

**「從簡單開始，僅在證明必要時才增加複雜度。」**

- 你隨時可以稍後加入模式
- 移除複雜度比加入複雜度困難得多
- 有疑慮時，選擇更簡單的選項
